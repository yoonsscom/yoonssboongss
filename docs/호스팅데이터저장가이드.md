# 💾 호스팅 사용 시 데이터 저장 가이드

## 현재 상황 (정적 호스팅)

### 문제점
- **Netlify, Vercel, GitHub Pages** 등 정적 호스팅 사용 시
- 관리자 모드에서 추가한 가게는 **각 사용자의 브라우저 LocalStorage에만 저장**
- 다른 사용자에게는 보이지 않음
- 브라우저 데이터 삭제 시 사라짐

### 저장 위치
```
사용자 A의 브라우저 → LocalStorage (사용자 A만 볼 수 있음)
사용자 B의 브라우저 → LocalStorage (사용자 B만 볼 수 있음)
서버/호스팅 → data.js 파일 (모든 사용자가 공유)
```

---

## 해결 방안

### 방법 1: 수동 동기화 (현재 가능) ⭐

**작동 방식:**
1. 관리자 모드에서 가게 추가
2. "💾 JSON 다운로드" 클릭
3. 다운로드한 JSON을 `data.js`에 통합
4. GitHub에 푸시 → 호스팅 자동 배포

**장점:**
- 추가 설정 불필요
- 즉시 사용 가능
- 무료

**단점:**
- 수동 작업 필요
- 실시간 반영 안 됨

---

### 방법 2: Firebase/Supabase 사용 (추천) ⭐⭐⭐

**작동 방식:**
- Firebase Realtime Database 또는 Supabase 사용
- 모든 사용자가 공유하는 데이터베이스
- 실시간 동기화

**장점:**
- 모든 사용자가 추가한 가게를 볼 수 있음
- 실시간 업데이트
- 무료 플랜 제공
- 브라우저 데이터 삭제해도 안전

**단점:**
- 초기 설정 필요
- Firebase/Supabase 계정 필요

**구현 방법:**
1. Firebase 프로젝트 생성
2. Realtime Database 활성화
3. `app.js`에서 Firebase SDK 사용
4. LocalStorage 대신 Firebase에 저장

---

### 방법 3: Netlify Functions + GitHub API (고급) ⭐⭐

**작동 방식:**
- Netlify Functions (서버리스 함수) 사용
- GitHub API로 `data.js` 파일 자동 업데이트
- GitHub에 푸시하면 호스팅 자동 배포

**장점:**
- 모든 사용자가 공유
- 자동으로 GitHub에 반영
- Git 히스토리 유지

**단점:**
- 구현 복잡
- GitHub Personal Access Token 필요
- Netlify Functions 설정 필요

---

### 방법 4: Supabase (가장 추천) ⭐⭐⭐

**왜 Supabase인가?**
- 무료 플랜 제공
- 설정 간단
- 실시간 동기화
- SQL 데이터베이스 (관리 쉬움)
- REST API 자동 생성

**구현 예시:**
```javascript
// Supabase 클라이언트 초기화
const supabase = createClient('YOUR_SUPABASE_URL', 'YOUR_SUPABASE_KEY')

// 가게 추가
async function addStore(storeData) {
  const { data, error } = await supabase
    .from('stores')
    .insert([storeData])
  
  if (error) {
    console.error('오류:', error)
  } else {
    console.log('추가 완료:', data)
  }
}

// 가게 목록 가져오기
async function loadStores() {
  const { data, error } = await supabase
    .from('stores')
    .select('*')
  
  return data || []
}
```

---

## 비교표

| 방법 | 난이도 | 비용 | 실시간 | 공유 | 추천도 |
|------|--------|------|--------|------|--------|
| 수동 동기화 | ⭐ 쉬움 | 무료 | ❌ | ✅ | ⭐⭐ |
| Firebase | ⭐⭐ 보통 | 무료 | ✅ | ✅ | ⭐⭐⭐ |
| Supabase | ⭐⭐ 보통 | 무료 | ✅ | ✅ | ⭐⭐⭐ |
| Netlify Functions | ⭐⭐⭐ 어려움 | 무료 | ✅ | ✅ | ⭐⭐ |

---

## 권장 사항

### 현재 상황
- **정적 호스팅 사용 중**: 수동 동기화 방법 사용
- **향후 개선**: Supabase 또는 Firebase 도입

### 단계별 개선
1. **1단계 (현재)**: 수동 동기화로 사용
2. **2단계 (향후)**: Supabase 도입하여 실시간 공유

---

## Supabase 빠른 시작 (참고)

### 1. Supabase 프로젝트 생성
1. https://supabase.com 접속
2. "Start your project" 클릭
3. GitHub로 로그인
4. "New Project" 생성

### 2. 데이터베이스 테이블 생성
```sql
CREATE TABLE stores (
  id SERIAL PRIMARY KEY,
  name TEXT NOT NULL,
  address TEXT NOT NULL,
  phone TEXT,
  lat FLOAT NOT NULL,
  lng FLOAT NOT NULL,
  hours JSONB,
  menu JSONB,
  image TEXT,
  memo TEXT,
  created_at TIMESTAMP DEFAULT NOW()
);
```

### 3. Row Level Security 설정
- 모든 사용자가 읽기 가능
- 관리자만 쓰기 가능 (또는 인증된 사용자만)

### 4. JavaScript 코드 수정
- `app.js`에서 LocalStorage 대신 Supabase 사용
- 실시간 구독으로 자동 업데이트

---

## 결론

**현재 (정적 호스팅):**
- LocalStorage에만 저장 (각 사용자별)
- 수동 동기화 필요

**개선 후 (Supabase/Firebase):**
- 모든 사용자가 공유
- 실시간 동기화
- 브라우저 데이터 삭제해도 안전

