<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="description" content="붕어빵 가게 정보를 쉽게 찾아보세요">
    <title>윤쓰의 광안리 붕세권 - 붕어빵 가게 찾기</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- 헤더 -->
    <header class="header">
        <div class="header-content">
            <h1 class="logo">🍞 윤쓰붕쓰 강알리붕세권</h1>
            <button class="btn-current-location" id="btnCurrentLocation" title="현재 위치">
                <span class="btn-icon">📍</span>
                <span class="btn-text">현위치</span>
            </button>
        </div>
    </header>

    <!-- 검색 바 -->
    <div class="search-bar">
        <input type="text" 
               id="searchInput" 
               class="search-input" 
               placeholder="지역명 또는 가게명 검색"
               autocomplete="off">
        <button class="btn-search" id="btnSearch">🔍</button>
    </div>

    <!-- 탭 버튼 -->
    <div class="tabs">
        <button class="tab-btn active" id="tabMap">지도</button>
        <button class="tab-btn" id="tabList">목록</button>
    </div>

    <!-- 지도 컨테이너 -->
    <div id="mapContainer" class="map-container active">
        <div id="map" class="map"></div>
    </div>

    <!-- 목록 컨테이너 -->
    <div id="listContainer" class="list-container">
        <div class="list-header">
            <span id="storeCount">총 0개</span>
            <select id="sortSelect" class="sort-select">
                <option value="distance">거리순</option>
                <option value="name">이름순</option>
            </select>
        </div>
        <div id="storeList" class="store-list">
            <!-- 가게 목록이 여기에 동적으로 추가됩니다 -->
        </div>
    </div>

    <!-- 가게 상세 모달 -->
    <div id="storeModal" class="modal">
        <div class="modal-content">
            <button class="modal-close" id="modalClose">×</button>
            <div id="modalBody">
                <!-- 가게 상세 정보가 여기에 표시됩니다 -->
            </div>
        </div>
    </div>

    <!-- 로딩 인디케이터 -->
    <div id="loading" class="loading hidden">
        <div class="spinner"></div>
    </div>

    <!-- 비밀번호 입력 모달 -->
    <div id="passwordModal" class="modal">
        <div class="modal-content password-modal">
            <button class="modal-close" id="passwordClose">×</button>
            <h2>🔒 관리자 모드</h2>
            <p style="margin-bottom: 20px; color: #666;">비밀번호를 입력하세요</p>
            <form id="passwordForm">
                <div class="form-group">
                    <input type="password" 
                           id="passwordInput" 
                           class="password-input" 
                           placeholder="비밀번호 입력"
                           autocomplete="off"
                           required
                           autofocus>
                </div>
                <div class="form-actions">
                    <button type="submit" class="btn-save">확인</button>
                    <button type="button" class="btn-cancel" id="passwordCancel">취소</button>
                </div>
            </form>
        </div>
    </div>

    <!-- 관리자 모드 UI -->
    <div id="adminPanel" class="admin-panel hidden">
        <div class="admin-header">
            <h2>🔧 관리자 모드</h2>
            <button class="admin-close" id="adminClose">×</button>
        </div>
        <div class="admin-content">
            <div class="admin-actions">
                <button class="btn-admin" id="btnAddStore">➕ 가게 추가</button>
                <button class="btn-admin" id="btnExportData">💾 JSON 다운로드</button>
                <button class="btn-admin" id="btnImportData">📤 JSON 업로드</button>
                <input type="file" id="fileInput" accept=".json" style="display: none;">
            </div>
            <div class="admin-stores-list" id="adminStoresList">
                <!-- 관리자용 가게 목록 -->
            </div>
        </div>
    </div>

    <!-- 가게 편집 모달 -->
    <div id="storeEditModal" class="modal">
        <div class="modal-content store-edit-modal">
            <button class="modal-close" id="storeEditClose">×</button>
            <h2 id="storeEditTitle">가게 추가</h2>
            <form id="storeEditForm">
                <input type="hidden" id="editStoreId">
                
                <div class="form-group">
                    <label>가게 이름 *</label>
                    <input type="text" id="editStoreName" required>
                </div>
                
                <div class="form-group">
                    <label>주소 *</label>
                    <input type="text" id="editStoreAddress" required>
                </div>
                
                <div class="form-group">
                    <label>전화번호</label>
                    <input type="text" id="editStorePhone">
                </div>
                
                <div class="form-group">
                    <label>영업시간</label>
                    <div class="form-row">
                        <input type="text" id="editStoreOpen" placeholder="예: 10:00">
                        <span>~</span>
                        <input type="text" id="editStoreClose" placeholder="예: 22:00">
                    </div>
                </div>
                
                <div class="form-group">
                    <label>좌표 (지도에서 클릭하여 선택) *</label>
                    <div class="form-row">
                        <input type="number" id="editStoreLat" step="0.000001" placeholder="위도" required>
                        <input type="number" id="editStoreLng" step="0.000001" placeholder="경도" required>
                    </div>
                    <button type="button" class="btn-map-select" id="btnMapSelect">🗺️ 지도에서 선택</button>
                </div>
                
                <div class="form-group">
                    <label>메뉴</label>
                    <div id="menuList">
                        <!-- 메뉴 항목들이 여기에 추가됨 -->
                    </div>
                    <button type="button" class="btn-add-menu" id="btnAddMenu">➕ 메뉴 추가</button>
                </div>
                
                <div class="form-group">
                    <label>이미지 URL</label>
                    <input type="text" id="editStoreImage" placeholder="https://...">
                </div>
                
                <div class="form-group">
                    <label>메모</label>
                    <textarea id="editStoreMemo" 
                              rows="4" 
                              placeholder="가게에 대한 메모를 입력하세요 (예: 맛있어요, 친절해요, 특별한 메뉴 등)"
                              style="width: 100%; padding: 12px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 14px; font-family: inherit; resize: vertical; outline: none; transition: border-color 0.3s; box-sizing: border-box;"></textarea>
                </div>
                
                <div class="form-actions">
                    <button type="submit" class="btn-save">💾 저장</button>
                    <button type="button" class="btn-cancel" id="btnCancelEdit">취소</button>
                </div>
            </form>
        </div>
    </div>

    <!-- 설정 파일 로드 -->
    <script src="config.js"></script>
    <!-- 네이버 지도 API 스크립트 (동적으로 로드) -->
    <script>
        // 네이버 지도 API 로드
        function loadNaverMapAPI() {
            // config.js에서 API 키 가져오기
            const apiKey = (typeof CONFIG !== 'undefined' && CONFIG.NAVER_MAP_API_KEY) 
                ? CONFIG.NAVER_MAP_API_KEY 
                : '';
            
            if (!apiKey || apiKey === 'YOUR_API_KEY_HERE' || apiKey.trim() === '') {
                console.error('네이버 지도 API 키가 설정되지 않았습니다. config.js 파일을 확인해주세요.');
                alert('네이버 지도 API 키가 설정되지 않았습니다.\n\nconfig.js 파일에 API 키를 설정해주세요.');
                return;
            }
            
            const script = document.createElement('script');
            script.type = 'text/javascript';
            script.src = `https://oapi.map.naver.com/openapi/v3/maps.js?ncpKeyId=${apiKey}`;
            script.onerror = function() {
                console.error('네이버 지도 API를 불러오는데 실패했습니다.');
                alert('네이버 지도 API를 불러오는데 실패했습니다.\n\n가능한 원인:\n1. API 키가 잘못되었습니다\n2. Web 서비스 URL이 등록되지 않았습니다\n3. 네트워크 연결을 확인해주세요');
            };
            document.head.appendChild(script);
        }
        
        // 페이지 로드 시 API 로드
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', loadNaverMapAPI);
        } else {
            loadNaverMapAPI();
        }
    </script>
    <script src="data.js"></script>
    <script src="app.js"></script>
</body>
</html>

